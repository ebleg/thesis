\begin{tikzpicture}[line cap=round,line join=round]
  % BACKGROUND FILLS
  \fill [main, domain=-4.3:4.3, accent1!40] plot (\x, {0.25*\x*\x}) -- cycle; % main graph
  \fill [main, domain=-4.3:4.3, accent2!40] (-4.3, 0) -- plot (\x, {0.25*\x*\x}) -- (4.3, 0) -- cycle; % main graph
  \fill [main, todoGray!30] (-4.3, 0) -- (-4.3, -2.7) -- (4.3, -2.7) -- (4.3, 0) -- cycle; % main graph

  % MAIN DIAGRAM
  \draw [main,->, thick] (0,-0.3) -- (0,4.8)  % vertical axis
    node [label={[above,yshift=-0.2cm] $\mathscr{N}(a)$}] {};

  \draw [main,->, thick] (-4.5,0) -- (4.5,0)  % horizontal axis
    node [label={[right,yshift=-1ex] $a_0$}] {}; 

    \draw [main, domain=-4.3:4.5, smooth, double] plot (\x, {0.25*\x*\x}) node [anchor=south] {$\mathscr{N}(\vec{a}) = 0$}; % main graph
  %\node at (-4,4) [pin={[above]$\scriptstyle\Delta=0$}] {};

  %\node at (-4,4) [pin={[above]$\scriptstyle\Delta=0$}] {};

  %\node at (4,4.2) [pin={[align=left] {$ \mathscr{N}(\vec{a}) = 0$}}] {};

  % TEMPLATES describing areas
  \node at ( 0  ,-1.4) {\template\saddle};
  \node at (-3.5  , 1  ) {\template\sink};
  \node at ( 3.5  , 1  ) {\template\source}; 
  \node at (-1.8, 3.7) {\template\spiralsink};
  \node at ( 1.8, 3.7) {\template\spiralsource};

  % TEMPLATES labeling lines and points
  \node at ( 0  , 1.1) [inner sep= 1mm, outer sep = 0mm, pin={[draw,fill=white,right,xshift=0.2cm]%
    \template\centre}] {};
  \node at (-3  , 0  ) [inner sep= 1mm, outer sep = 0mm, pin={[draw,fill=white,below,yshift=-1cm]%
    \template\stablefp}] {};
  \node at ( 3  , 0  ) [inner sep= 1mm, outer sep = 0mm, pin={[draw,fill=white,below,yshift=-1cm]%
    \template\unstablefp}] {};
  \node at (-3.5,{0.25*3.5*3.5}) [inner sep= 1mm, outer sep = 0mm, pin={[draw,left,fill=white,xshift=-1.15cm,yshift=-0.3cm]%
    \template\degensink}] {};
  \node at (3.5,{0.25*3.5*3.5}) [inner sep= 1mm, outer sep = 0mm, pin={[draw,fill=white,right,xshift=1.15cm,yshift=-0.3cm]%
    \template\degensource}] {};
  \node at ( 0  , 0  ) [inner sep= 1mm, outer sep = 0mm, pin={[draw, above left,fill=white,align=center,xshift=-0.3cm]%
    ~\\[-0.9ex]\templatecaption{\normalsize{\circled{3}}}\\[-0.6ex]\templatecaption{uniform}\\[-1ex]\templatecaption{motion}}] {};
%% sdafasd

    \node[fill=accent1!40, draw=none, label=right:{\footnotesize $\mathscr{N}(a) > 0,\:\mathscr{N}(\vec{a}) > 0$}] at (4.7,-1) {};
    \node[fill=accent2!40, draw=none, label=right:{\footnotesize $\mathscr{N}(a) > 0,\:\mathscr{N}(\vec{a}) < 0$}] at (4.7,-1.6) {};
    \node[fill=todoGray!30, draw=none, label=right:{\footnotesize $\mathscr{N}(a) < 0$}] at (4.7,-2.2) {};

 % Place nodes for numbering classes
    \node at (-3.7, 2.3) {\circled{4}};
    \node at (3.7, 2.3) {\circled{4}};
    \node at (-1.8, 2.3) {\circled{6}};
    \node at (3, 4) {\circled{6}};
    \node at (1, -2) {\circled{1}};

\end{tikzpicture}
